import{s as p}from"./main-Cbw1pNsF.js";import{c as f,r as y}from"./loadingIndicator-Dpmz7eLi.js";import"./apiRequest-C9VMWLkl.js";function C(e){const n=document.createElement("div");n.classList.add("flex","flex-col","gap-3","text-center","shadow-md","justify-between","p-2"),n.addEventListener("click",()=>{window.location.href=`/listing/singleListing/?id=${e.id}`});const s=document.createElement("div");if(n.appendChild(s),e.media&&e.media.length>0){const t=e.media[0],o=document.createElement("img");o.setAttribute("src",t.url),o.setAttribute("alt",t.alt||"Listing image"),o.classList.add("w-full","h-60","object-cover","rounded-md"),s.appendChild(o)}else{const t=document.createElement("img");t.setAttribute("src","path_to_placeholder_image.jpg"),t.setAttribute("alt","No image available"),s.appendChild(t)}const a=document.createElement("div");n.appendChild(a);const r=document.createElement("h3");if(r.textContent=e.title,r.classList.add("font-paragraph","text-2xl"),a.appendChild(r),e.seller&&e.seller.name){const t=document.createElement("p");t.textContent=`Sold by: ${e.seller.name}`,t.classList.add("font-paragraph","text-lg","text-slate-600"),a.appendChild(t)}const i=document.createElement("button");return i.textContent="Bid on item",i.classList.add("w-fit","font-paragraph","text-lg","bg-brand-main","hover:bg-brand-mainhover","transition","duration-200","px-2","rounded-md","text-white","mx-auto"),n.appendChild(i),n}async function g(e="",n=1,s=!1){const a=document.getElementById("listings-container");if(!a){p({message:"Listings container not found.",type:"error"});return}const r=f("Loading listings...",80);a.appendChild(r);try{const i=await y(12,n,e);if(s||(a.innerHTML=""),i.data.length===0){const o=document.createElement("p");o.textContent="No listings available for this category.",o.classList.add("text-center","font-paragraph","text-xl","text-red-500","mt-5"),a.appendChild(o)}else i.data.forEach(o=>{const h=C(o);a.appendChild(h)});const t=document.getElementById("show-more-btn");i.data.length<12?t.style.display="none":t.style.display="block"}catch(i){p({message:"Error displaying listings: "+i.message,type:"error"})}finally{r&&r.remove()}}function u(e){return new URLSearchParams(window.location.search).get(e)}const d=u("category")?u("category").toLowerCase():"",x=d?d.charAt(0).toUpperCase()+d.slice(1):"All",m=document.querySelector("h1");m&&(m.textContent=`${x} Listings`);let c=1,l=d;g(l,c,!1);document.querySelectorAll(".category-menu a").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault(),c=1,l=e.textContent.trim().toLowerCase();const s=`/listing/?category=${encodeURIComponent(l)}`;window.history.pushState({path:s},"",s);const a=l.charAt(0).toUpperCase()+l.slice(1);m.textContent=`${a} Listings`,g(l,c,!1)})});document.getElementById("show-more-btn").addEventListener("click",()=>{c++,g(l,c,!0)});export{C as createListingElement,g as displayListings};
