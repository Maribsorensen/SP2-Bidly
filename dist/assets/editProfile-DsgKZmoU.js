import{a as m}from"./authGuard-C2GFzsuy.js";import{a as l,c as n}from"./apiRequest-C9VMWLkl.js";import{s as r}from"./main-Cbw1pNsF.js";async function c(){const o=localStorage.getItem("username");if(!o){r({message:"Profile not found, please try again...",type:"error"});return}try{const e=await l(`${n}/${o}`,"GET",null,!0);if(!e||!e.data){r({message:"Failed to fetch profile data",type:"error"});return}const a=e.data,t=document.forms.editProfile;if(!t){r({message:"Edit profile form not found on the page",type:"error"});return}t.bio.value=a.bio||"",t.avatarUrl.value=a.avatar&&a.avatar.url?a.avatar.url:"",t.avatarAlt.value=a.avatar&&a.avatar.alt?a.avatar.alt:""}catch(e){r({message:"Error loading profile: "+e.message,type:"error"})}}async function d(o){o.preventDefault();const e=o.target,a=localStorage.getItem("username");if(!a){r({message:"Profile not found, please try again...",type:"error"});return}const t=e.bio.value,s=e.avatarUrl.value,i=e.avatarAlt.value,u={bio:t,avatar:s?{url:s,alt:i||"Image"}:void 0};try{await l(`${n}/${a}`,"PUT",u,!0),r({message:"Profile updated successfully!",type:"success"}),window.location.href="/profile/"}catch(f){r({message:"Failed to update profile: "+f.message,type:"error"})}}c();const p=document.forms.editProfile;p.addEventListener("submit",d);m();
