import{s as p,a as f,b as y,t as C,u as L}from"./updateNav-DTGeWYsz.js";import{c as x,r as w}from"./loadingIndicator-D-63DEQq.js";function E(e){const n=document.createElement("div");n.classList.add("flex","flex-col","gap-3","text-center","shadow-md","justify-between","p-2"),n.addEventListener("click",()=>{window.location.href=`/listing/singleListing/?id=${e.id}`});const i=document.createElement("div");if(n.appendChild(i),e.media&&e.media.length>0){const t=e.media[0],o=document.createElement("img");o.setAttribute("src",t.url),o.setAttribute("alt",t.alt||"Listing image"),o.classList.add("w-full","h-60","object-cover","rounded-md"),i.appendChild(o)}else{const t=document.createElement("img");t.setAttribute("src","path_to_placeholder_image.jpg"),t.setAttribute("alt","No image available"),i.appendChild(t)}const a=document.createElement("div");n.appendChild(a);const r=document.createElement("h3");if(r.textContent=e.title,r.classList.add("font-paragraph","text-2xl"),a.appendChild(r),e.seller&&e.seller.name){const t=document.createElement("p");t.textContent=`Sold by: ${e.seller.name}`,t.classList.add("font-paragraph","text-lg","text-slate-600"),a.appendChild(t)}const s=document.createElement("button");return s.textContent="Bid on item",s.classList.add("w-fit","font-paragraph","text-lg","bg-brand-main","hover:bg-brand-mainhover","transition","duration-200","px-2","rounded-md","text-white","mx-auto"),n.appendChild(s),n}async function g(e="",n=1,i=!1){const a=document.getElementById("listings-container");if(!a){p({message:"Listings container not found.",type:"error"});return}const r=x("Loading listings...",80);a.appendChild(r);try{const s=await w(12,n,e);if(i||(a.innerHTML=""),s.data.length===0){const o=document.createElement("p");o.textContent="No listings available for this category.",o.classList.add("text-center","font-paragraph","text-xl","text-red-500","mt-5"),a.appendChild(o)}else s.data.forEach(o=>{const h=E(o);a.appendChild(h)});const t=document.getElementById("show-more-btn");s.data.length<12?t.style.display="none":t.style.display="block"}catch(s){p({message:"Error displaying listings: "+s.message,type:"error"})}finally{r&&r.remove()}}function u(e){return new URLSearchParams(window.location.search).get(e)}const c=u("category")?u("category").toLowerCase():"",b=c?c.charAt(0).toUpperCase()+c.slice(1):"All",m=document.querySelector("h1");m&&(m.textContent=`${b} Listings`);let d=1,l=c;g(l,d,!1);document.querySelectorAll(".category-menu a").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault(),d=1,l=e.textContent.trim().toLowerCase();const i=`/listing/?category=${encodeURIComponent(l)}`;window.history.pushState({path:i},"",i);const a=l.charAt(0).toUpperCase()+l.slice(1);m.textContent=`${a} Listings`,g(l,d,!1)})});document.getElementById("show-more-btn").addEventListener("click",()=>{d++,g(l,d,!0)});f();y();C();L();export{E as createListingElement,g as displayListings};
