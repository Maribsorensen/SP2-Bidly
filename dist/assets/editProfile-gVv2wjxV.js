import{s as r,c as l,e as n,a as c,b as m,t as d,u as p}from"./updateNav-DTGeWYsz.js";import{a as g}from"./authGuard-C2GFzsuy.js";async function v(){const o=localStorage.getItem("username");if(!o){r({message:"Profile not found, please try again...",type:"error"});return}try{const e=await l(`${n}/${o}`,"GET",null,!0);if(!e||!e.data){r({message:"Failed to fetch profile data",type:"error"});return}const a=e.data,t=document.forms.editProfile;if(!t){r({message:"Edit profile form not found on the page",type:"error"});return}t.bio.value=a.bio||"",t.avatarUrl.value=a.avatar&&a.avatar.url?a.avatar.url:"",t.avatarAlt.value=a.avatar&&a.avatar.alt?a.avatar.alt:""}catch(e){r({message:"Error loading profile: "+e.message,type:"error"})}}async function y(o){o.preventDefault();const e=o.target,a=localStorage.getItem("username");if(!a){r({message:"Profile not found, please try again...",type:"error"});return}const t=e.bio.value,s=e.avatarUrl.value,u=e.avatarAlt.value,i={bio:t,avatar:s?{url:s,alt:u||"Image"}:void 0};try{await l(`${n}/${a}`,"PUT",i,!0),r({message:"Profile updated successfully!",type:"success"}),window.location.href="/profile/"}catch(f){r({message:"Failed to update profile: "+f.message,type:"error"})}}v();const P=document.forms.editProfile;P.addEventListener("submit",y);g();c();m();d();p();
