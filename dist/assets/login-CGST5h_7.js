import{a as c,A as l}from"./apiRequest-C9VMWLkl.js";import{s as m}from"./main-C6zY-29k.js";function d(e){return c(l,"POST",e)}async function f(e){e.preventDefault();const n=e.target,a=n.querySelector("fieldset"),t=n.querySelector("button"),s=t.textContent,r=new FormData(n),i=Object.fromEntries(r);a.disabled=!0,t.disabled=!0,t.textContent="Logging in...";try{const o=await d(i);localStorage.setItem("token",o.data.accessToken),localStorage.setItem("username",o.data.name),setTimeout(()=>{window.location.href="/"},1e3)}catch(o){m({message:"Login error: "+o.message,type:"error"})}finally{a.disabled=!1,t.disabled=!1,t.textContent=s}}const u=document.forms.login;u.addEventListener("submit",f);
